{% extends "base.html" %}
{% block page_class %}home-page{% endblock %}
{% block content %}
<header class="jumbotron">
<script type="text/javascript"
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyD4YZLyMqH7XhEx6zJDRbEeaVdvIkGFndc&sensor=false">
</script>
<script>
    function load_map(region_lat, region_long, hotels) {
        var mapOptions = {
        center: new google.maps.LatLng(region_lat, region_long),
        mapTypeId: google.maps.MapTypeId.ROADMAP
        };
        var map = new google.maps.Map(document.getElementById("map_canvas"),
            mapOptions);
        var bounds = new google.maps.LatLngBounds();
        for (i = 0; i < hotels.length; i += 1){
          new google.maps.Marker({
              map:map,
              position:new google.maps.LatLng(hotel[i].Latitude, hotel[i].Longitude),
              icon:"/static/img/orange0" + i.toString(),
              cursor:hotel[i].name,
              title:hotel[i].name,
          });
          bounds.extend(new google.maps.LatLng(hotel[i].Latitude, hotel[i].Longitude));
        }
        map.fitBounds (bounds);
    }


</script>

<div ng-init="region_id={{region_id}};base_hotel_id={{base_hotel_id}};date_from='{{date_from}}';date_to='{{date_to}}'"></div>

<div ng-controller="HotelRecoCtrl">



{% raw %}
    <div class="row-fluid">
        <div id="list_view" class="box blue span9">
            <!-- List View -->
            <div class="box-header">
                <h2>
                    <i class="halflings-icon fire"></i>
                    <span class="break"></span>
                    <strong>Hunchkin Recommendations</strong>
                </h2>
            </div>
            <div class="box-content">
            <ol id="hotel_selectable" class="ui-selectable">
                <li class="ui-widget-content" ng-repeat="hotel in selection">
                  <div class="row-fluid">
                    <div class="hotel-item span5">
                        <div class="row-fluid" style="height: 7px">
                        </div>
                        <div class="list-view-index" style="height: 0px; visibility:hidden">
                          {{$index}}
                        </div>
                        <div class="row-fluid">
                            <div class="span1">
                              <img src="{{'/static/img/orange0' + ($index+1).toString() + '.png'}}"/>
                            </div>
                            <div class="span3">
                              <img class="img-rounded" src="{{hotel.ThumbnailURL}}"/>
                            </div>
                            <div class="span8">
                                <div class="hotel-name row-fluid"> 
                                  <strong>{{hotel.Name}}</strong>
                                </div>
                                <div class="row-fluid">
                                    <div class="span6" ng-bind-html="ratingHTML(hotel.StarRating)">
                                    </div>
                                    <div class="span6">
                                        <img src="static/img/ta-sample.gif">
                                    </div>
                                </div>
                                <div class="row-fluid">
                                    <div class="span6" ng-bind-html="priceHTML(hotel.avail_response)">
                                    </div>
                                    <div class="span6">
                                        <button class="btn-mini btn-success pull-right" style="">Book</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row-fluid" style="height: 7px">
                        </div>
                    </div>
                    <div class="hotel-highlights span7">
                      <ul>
                          <li>Supervised childcare activities</li>
                          <li>Full-service health spa</li>
                          <li class="text-error">Parking charges</li>
                      </ul>
                    </div>
                  </div>
                </li>
            </ol>
        </div>
    </div>
        <div id="refinement" class="box span3">
            <div class="box-header">
                <h2>
                    <i class="halflings-icon check"></i>
                    <span class="break"></span>
                    <strong>Refine your search</strong>
                </h2>
            </div>
            <div class="box-content">
                <span class="label label-info"><small>Does your party have?</small></span>
                <div>
                        <label class="checkbox inline">
                            <input id="cb_kids" type="checkbox" checked>Kids
                        </label>
                        <label class="checkbox inline">
                            <input id="cb_disabled" type="checkbox">Seniors/Disabled
                        </label>
                        <label class="checkbox inline">
                            <input id="cb_pets" type="checkbox">Pets
                        </label>
                </div>
                <hr>
                <span class="label label-info"><small>Price Range: </span><input type="text" class="input-small" id="filter_price" disabled/>
                <div priceslider id="price-slider" style="width: 200px; "></div>
                <hr>
                <span class="label label-info"><small>Things you care about</small></span>
                <div class="row-fluid">
                    <div class="span6">
                        <h5>Hotel Features</h5>
                        <label class="checkbox"><input checked="checked" type="checkbox" value="features.bar"><small> Bar</small></label>
                        <label class="checkbox"><input checked="checked" type="checkbox" value="features.breakfast"><small> Breakfast, Coffee etc.</small></label>
                        <label class="checkbox"><input checked="checked" type="checkbox" value="features.Dining"><small> Dining</small></label>
                        <label class="checkbox"><input checked="checked" type="checkbox" value="features.business_amenities"><small> Business Amenities</small></label>
                        <label class="checkbox"><input checked="checked" type="checkbox" value="features.kids_facilities"><small> Kids Facilities</small></label>
                        <label class="checkbox"><input checked="checked" type="checkbox" value="features.pool"><small> Swimming Pool</small></label>
                        <label class="checkbox"><input checked="checked" type="checkbox" value="features.sports"><small> Sports facilities</small></label>
                        <h5>Room</h5>
                        <label class="checkbox"><input checked="checked" type="checkbox" value="rooms.bed_bath"><small> Bed and bath</small></label>
                        <label class="checkbox"><input checked="checked" type="checkbox" value="rooms.internet"><small> Internet</small></label>
                        <label class="checkbox"><input checked="checked" type="checkbox" value="rooms.entertainment"><small> In Room Entertainment</small></label>
                        <label class="checkbox"><input checked="checked" type="checkbox" value="rooms.kitchen"><small> In Room Kitchen Applicances</small></label>
                    </div>
                    <div class="span6">
                        <h5>Proximity to</h5>
                        <label class="checkbox"><input checked="checked" type="checkbox" value="location.attractions"><small> Local Attractions</small></label>
                        <label class="checkbox"><input checked="checked" type="checkbox" value="location.bars_restaurants"><small> Bars and Restaurants</small></label>
                        <label class="checkbox"><input checked="checked" type="checkbox" value="location.essential_services"><small> Essential Services</small></label>
                        <label class="checkbox"><input checked="checked" type="checkbox" value="location.nightlife"><small> Nightlife</small></label>
                        <label class="checkbox"><input checked="checked" type="checkbox" value="location.recreation"><small> Recreation</small></label>
                        <label class="checkbox"><input checked="checked" type="checkbox" value="location.shopping"><small> Shopping</small></label>
                        <label class="checkbox"><input checked="checked" type="checkbox" value="location.transportation"><small> Local Transportation</small></label>
                    </div>
                </div>

                <!--
                <form class="">
                    <table class="table table-condensed">
                    <tr>
                        <td>
                        <select id="filter_travel_group" name="filter_travel_group" multiple=multiple" class="btn btn-mini">
                            <option value="kids">Children</option>
                            <option value="kids">Seniors</option>
                            <option value="kids">Pets</option>
                        </select>
                        </td>
                    </tr>
                    <tr>
                        <td>
                        <select id="filter_features" name="filter_features" multiple="multiple" class="btn btn-mini" >
                            <option value="Health_and_Wellness">Health & Wellness</option>
                            <option value="Recreation">Recreation</option>
                            <option value="Bath">Bath</option>
                            <option value="Room_Views">Room Views</option>
                            <option value="Room_Features">Room Features</option>
                        </select>
                        </td>
                    </tr>
                    <tr>
                        <td>
                        <select id="filter_location" name="filter_location" multiple="multiple" class="btn btn-mini">
                            <option value="Attractions">Attractions</option>
                            <option value="Dining">Dining</option>
                            <option value="Essential Services">Essential Services</option>
                            <option value="Recreation">Recreation</option>
                            <option value="Shopping">Shopping</option>
                            <option value="Nightlife">Nightlife</option>
                        </select>
                        </td>
                    </tr>
                    </table>
                    <p> </p>
                    <table class="table table-condensed">
                    <tr>
                        <td>Price Range:<input type="text" id="filter_price" style=" border: 0; color: #f6931f;" disabled/></td>
                    </tr>
                    <tr>
                        <td><div priceslider id="price-slider" style="width: 200px; margin: 10px;"></div></td>
                    <tr>
                    </table>
                    
                </form>
                -->
            </div>
        </div>
    </div>
    <div class="row-fluid">
        <div id="survey" class="box span4">
            <div class="box-header">
                <h2>
                    <i class="halflings-icon th"></i>
                    <span class="break"></span>
                    Side-by-side comparison
                </h2>
            </div>
            <div class="box-content">
                <p><small>See a detailed comparison of these hotels</small></p>
            </div>
        </div>
        <div id="survey" class="box span4">
            <div class="box-header">
                <h2>
                    <i class="halflings-icon globe"></i>
                    <span class="break"></span>
                    Map view
                </h2>
            </div>
            <div class="box-content">
                <p><small>See these hotels on the map</small></p>
            </div>
        </div>
        <div id="survey" class="box span4">
            <div class="box-header">
                <h2>
                    <i class="halflings-icon user"></i>
                    <span class="break"></span>
                    Ask your friends
                </h2>
            </div>
            <div class="box-content">
                <p><small>Maybe your friends have stayed at these hotels. Ask your friends for suggestions.</small></p>
                <button class="btn btn-info btn-block" ng-click="postSurvey()"><i class="icon-facebook-sign icon-2x"></i> Post a poll on Facebook</button>
            </div>
        </div>
    </div>
<!--
<div id="map_canvas" class="span11 pull-left">
<!-- Map View -->
</div>
-->

</div> <!-- ng-controller -->


{% endraw %}
{% endblock %}

{% block javascript %}
<script>
$(function() {
    $( "#hotel_selectable" ).selectable({filter: "li"});
});
</script>
<script>
$(".StarRating").raty({
    readOnly: true,
    path:"static/img",
    score:function() {
        return $(this).attr("star-rating");
    }
});
$("#filter_travel_group").multiselect({
  selectedText: 'Travel party',
  header: false,
  noneSelectedText: 'Travel party'
});
$("#filter_features").multiselect({
  selectedText: 'Features',
  header: true,
  noneSelectedText: 'Features'
});
$("#filter_location").multiselect({
  selectedText: 'Location',
  header: true,
  noneSelectedText: 'Location'
});
$("#filter_travel_group").multiselect("checkAll");
$("#filter_features").multiselect("checkAll");
$("#filter_location").multiselect("checkAll");
/*
$( "#price-slider" ).slider({
  range: true,
  min: 0,
  max: 1500,
  step: 20,
  values: [ 20, 1400 ],
  slide: function( event, ui ) {
      $( "#filter_price" ).val( "$" + ui.values[ 0 ] + " - $" + ui.values[ 1 ] );
  },
  stop: function( event, ui ) {
      $( "#filter_price_min").val(ui.values[0]);
      $( "#filter_price_max").val(ui.values[1]);
      updateSelection();
  }
});
$( "#filter_price" ).val( "$" + $( "#price-slider" ).slider( "values", 0 ) +
  " - $" + $( "#price-slider" ).slider( "values", 1 ) );
$( "#filter_price_min" ).val($( "#price-slider" ).slider( "values", 0 ) );
$( "#filter_price_max" ).val($( "#price-slider" ).slider( "values", 1 ) );
*/
</script>
{% endblock %}
